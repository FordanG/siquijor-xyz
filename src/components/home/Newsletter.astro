---

---

<section class="py-20 px-6 bg-jungle-700 dark:bg-volcanic-950">
  <div class="max-w-3xl mx-auto text-center">
    <!-- Icon -->
    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-amber-400/20 mb-8">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="w-8 h-8 text-amber-400"
      >
        <path d="M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4" />
        <path d="M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3" />
        <path d="M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35" />
        <path d="M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14" />
      </svg>
    </div>

    <!-- Content -->
    <h2 class="text-3xl md:text-4xl font-bold text-white mb-4 font-display">
      Your Adventure Awaits
    </h2>
    <p class="text-jungle-200 dark:text-volcanic-400 mb-8 max-w-md mx-auto">
      Get insider tips, hidden gems, and exclusive guides delivered straight to your inbox.
    </p>

    <!-- Form -->
    <form id="newsletter-form" class="flex flex-col gap-3 max-w-md mx-auto">
      <input
        type="text"
        name="name"
        placeholder="Your name"
        required
        class="px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-amber-400/50 focus:border-transparent"
      />
      <div class="flex flex-col sm:flex-row gap-3">
        <input
          type="email"
          name="email"
          placeholder="Enter your email"
          required
          class="flex-1 px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-amber-400/50 focus:border-transparent"
        />
        <button
          type="submit"
          id="submit-btn"
          class="btn-secondary whitespace-nowrap"
        >
          Subscribe
        </button>
      </div>
      <p id="error-message" class="text-red-400 text-sm hidden"></p>
    </form>

    <!-- Success Message -->
    <div id="success-message" class="hidden max-w-md mx-auto">
      <div class="flex items-center justify-center w-12 h-12 rounded-full bg-green-500/20 mx-auto mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-green-400">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      </div>
      <p class="text-white text-lg font-medium">Thanks for subscribing!</p>
      <p class="text-jungle-200 dark:text-volcanic-400 mt-2">Check your inbox for island secrets.</p>
    </div>

    <p class="text-xs text-jungle-300 dark:text-volcanic-500 mt-4">
      We respect your privacy. Unsubscribe at any time.
    </p>
  </div>
</section>

<script>
  const form = document.getElementById('newsletter-form') as HTMLFormElement;
  const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
  const errorMessage = document.getElementById('error-message') as HTMLParagraphElement;
  const successMessage = document.getElementById('success-message') as HTMLDivElement;

  const WEBHOOK_URL = 'https://fsmgyijm.rpcld.cc/webhook/22254705-6474-48bf-9e39-64c976e5fe13';

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const name = formData.get('name') as string;
    const email = formData.get('email') as string;

    // Reset error state
    errorMessage.classList.add('hidden');

    // Set loading state
    submitBtn.disabled = true;
    submitBtn.textContent = 'Subscribing...';

    try {
      const response = await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name, email, source: 'siquijor-xyz' }),
      });

      if (!response.ok) {
        throw new Error('Subscription failed');
      }

      // Show success message
      form.classList.add('hidden');
      successMessage.classList.remove('hidden');
    } catch (error) {
      // Show error message
      errorMessage.textContent = 'Something went wrong. Please try again.';
      errorMessage.classList.remove('hidden');

      // Reset button
      submitBtn.disabled = false;
      submitBtn.textContent = 'Subscribe';
    }
  });
</script>
